# Инструкция по исправлению кодов доступа на сервере

## Проблема
В админке коды доступа показывают `undefined` — это значит у старых пациентов в БД нет значения в поле `access_code`.

## Решение 1: Сгенерировать коды для существующих пациентов (рекомендуется)

```bash
# На сервере
cd /path/to/backend
go run ./cmd/fix-access-codes
```

Эта утилита:
- Найдёт всех пациентов без кодов
- Сгенерирует уникальные коды для каждого
- Обновит записи в БД
- Отправит уведомления в Telegram (если привязаны)

## Решение 2: Полный сброс БД с тестовыми данными

```bash
# На сервере
cd /path/to/backend

# Вариант A: Через Go утилиту (работает всегда)
go run ./cmd/reset-db
go run ./cmd/seed

# Вариант B: Через bash скрипт (если есть psql)
./scripts/reset-and-seed.sh
```

После сброса будут созданы тестовые пациенты с кодами:
- `a1b2c3d4` — Туяра Алексеева
- `e5f6g7h8` — Айаал Степанов
- `i9j0k1l2` — Айыына Павлова

## Проверка

После выполнения проверьте в админке — коды должны отображаться корректно.

## Тестовые аккаунты

После seed будут доступны:
- `admin@example.com` / `admin123`
- `doctor@example.com` / `doctor123`
- `surgeon@example.com` / `surgeon123`
